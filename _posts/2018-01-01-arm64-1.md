---
layout: post
title: "树莓派3为什么要用64位系统"
quote: "pi3的cpu：bcm2837是一个armv8的处理器，它支持64位系统"
image: false
video: false
comments: true
---

# 一，众多的系统

众所周知，树莓派 3 配有 Broadcom BCM2837 64 位 ARMv8 四核 Cortex A53 处理器，它是一个 64 位 CPU！！！

但是，官方却没有发布64位系统。。。。

但是，我们这里有一些第三方的aarch64的系统。

## No.1 ubuntu

ubuntu64-rpi是chainsx的一个项目，虽然还不完善，但是，它能让树莓派3的性能得到充分发挥。

启动方式：

其启动方式为传统启动方式，但是启动速度可以吊打官方系统，从执行reboot到ssh连上不到10秒，

因为许多公有云提供商都提供的uhuntu云端系统是arm64，所以，对于ubuntu而言，arm64架构的软件包是最多的。

例如，可以看这是某开源镜像站的关于arm64软件包的索引文件。

![example1](https://github.com/chainsx/chainsx-blog/raw/master/assets/images/arm64.jpg "example1")

文件系统：

ubuntu64-rpi 项目的64位ubuntu的其中的系统文件系统采用了三星与华为合力开发的f2fs（当然还提供了传统的ext4的文件系统），该文件系统针对mmc和emmc还有tf存储进行了优化，

f2fs文件系统除了大大提升了性能之外，还增加了TF卡的使用寿命，提供了意外断电文件系统的保护，大大避免意外断电导致的文件系统崩溃的情况。

官方支持：

Ubuntu官方对于最新版本的树莓派2（其使用和树莓派3一样的bcm2837，启动方式以及其他方面都和树莓派3相同）在软件源里加入了bcm2837的内核，经测试对树莓派3可用，

所以，不管你是使用的最新版本的树莓派2还是树莓派3，Ubuntu官方对于arm64给了相当充足的支持。

此系统经过许多人的许多次测试而发布，虽然它现在不够完善，但仍然在继续前行。

次系统推荐新手使用，需要自己拓展根目录（你可以使用旧版本的raspi-config来进行拓展）。

### [项目地址](https://github.com/chainsx/ubuntu64-rpi)

## No.2 CentOS

centos64-rpi也是chainsx的一个项目，其使用CentOS官方提供的根目录构建，因为其极不完善，不建议新手使用。

但是经测试，该系统网络性能对比于官方raspbian系统以及centOS armhf来说有大幅度提升，适合作为服务器使用。

启动方式：

与CentOS官方给arm64启动方式不同，其使用传统启动方式，所以在系统预构建的根目录中有关于UEFI启动方式的软件包，你可以自己构建UEFI启动分区或者卸载这些软件包。

关于系统：

CentOS官方给的这个预构建的根目录稍有问题，但不是什么大问题，其问题通常提示你缺少某个库，你只需重新安装这个软件包即可(yum reinstall xxxx)

### [项目地址](https://github.com/chainsx/centos64-rpi)

## No.3 Debian

pi64是国外极客bamarni的作品，其启动方式使用传统启动方式，

该系统集成了一些工具（如pi64-config），开机可以自动拓展根目录，

对于系统完善程度比较高，不过对于cpu的优化做得不够，所以你在使用时几乎感觉不出这个系统的优越性。

此系统推荐新手使用。

### [项目地址](https://github.com/bamarni/pi64)

## No.4 openSUSE

这个系统不需要介绍了，它是最早适配64位系统的软件提供商

## No.5 ArchLinux

对于archlinux来说，方便的软件安装是它的优点之一，适配到树莓派上更是方便至极。

不过，ArchLinux官方连个可用的镜像文件都不给，需要自己来制作一张可启动的SD卡。

## No.6 LEDE(OpenWrt)

最近LEDE和OpenWrt合并了，这个消息够震惊的，

LEDE对于树莓派3提供了64位的支持，

用树莓派来做一个全能路由器，挺不错的。

## 总体上，64位的系统提供了更好的使用体验，曾经抱怨树莓派跑opencv性能不佳的朋友应该是看到希望了！

# 二，对于32位的支持

你在64位系统上可以打开对于32位软件的支持

arm64开启32位支持只需运行以下命令即可

`sudo dpkg --add-architecture armhf`

`sudo apt-get update`

`sudo apt-get install libc6:armhf`

这样，你就可以安装以及运行armhf的软件了，是不是很方便。

# 三，更多的软件包

在介绍ubuntu时说过，

arm64是软件包最多的架构之一，

原因是因为很多公有云提供商都提供了arm64的系统，再加上许多学习arm架构的人们都喜欢从arm64入手，虚拟arm64运行环境，等等原因。

例如，在软件源里提供了wine for arm（别吃惊，先看完），不过呢，这个wine只可以运行windows rt，windows nt的软件。

比起armhf直接没有要好一些罢了。

# 四，更快的运行速度

据评测，debian的性能提高了30倍，ubuntu的性能提高了近60倍。

相关数据如下

|测试项目      |     Raspbian2017-03-03     |      ubuntu-17.04-arm64(ubuntu64-rpi)    |     提升倍数|
|------------|----------------------------|-------------------------------------------|-----------|
|系统信息      |     Arm 32bit/ext4文件系统   |      Arm64bit/f2fs文件系统               |    * |
|CPU单线程     | 367.2971    |   12.4798    |       29倍|
|四线程        |  1017.6742  |   31.1217    |        31倍|
|八线程        |  1920.0601  |   31.0916    |        62倍|
|内存随机      |   5.7678    |   0.9564     |        6倍|
|内存连续      |   6.3309    |   1.2890     |        5倍|
|文件连续读写   |   5.7655    |   0.3604     |        15倍|
|随机读写      |   不支持      |  0.5636      |      无|
|互斥锁性能     |   0.0231s   | 0.0184s      |        1.2倍|

可见，64位系统的优势发挥得淋漓尽致。

## 看了这篇文章后，你还愿意使用官方那为了兼容pi1,pi2而开发的系统吗？
